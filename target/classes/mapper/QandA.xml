<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
   <mapper namespace="com.khie.model.QandADAO">
     
     <select id="qa_count" resultType="int">
       select count(*) from music_QandA
     </select>
     
     <select id="qa_list" parameterType="com.khie.model.QA_PageDTO" resultType="com.khie.model.QandADTO">
       <![CDATA[
			select * from
				(select b.*, row_number() 
					over(order by qa_no desc) rnum from music_qanda b)
					where rnum >= #{qa_startNo} and rnum <= #{qa_endNo}
	    ]]>
     </select>
     
     <insert id="qa_add" parameterType="com.khie.model.QandADTO">
		<selectKey resultType="int" keyProperty="qa_no" order="BEFORE">
			select max(qa_no) from music_qanda
		</selectKey>
		insert into music_qanda values(#{qa_no} + 1, #{qa_writer}, 
				#{qa_title},#{qa_pwd}, #{qa_cont}, sysdate,'')
	</insert>
     
     
  
   </mapper>